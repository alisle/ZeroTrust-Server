databaseChangeLog:
  - property:
      name: now
      value: now()
      dbms: h2
  - property:
      name: now
      value: current_timestamp
      dbms: postgresql
  - property:
      name: floatType
      value: float4
      dbms: postgres, h2
  - property:
      name: floatType
      value: float
      dbms: mysql, oracle, mssql
  - changeSet:
      id: 000000100-Create-Connection
      author: alisle
      changes:
        - createTable:
            tableName: connection_link
            columns:
              - column:
                  name: id
                  type: uuid
                  constraints:
                    primaryKey: true
                    nullable: false

              - column:
                  name: connection_hash
                  type: bigint
                  constraints:
                    nullable: false

              - column:
                  name: created_on
                  type: timestamp
                  constraints:
                    nullable: false

              - column:
                  name: source_agent_id
                  type: uuid
                  constraints:
                    nullable: false

              - column:
                  name: destination_agent_id
                  type: uuid
                  constraints:
                    nullable: false

              - column:
                  name: source_connection_id
                  type: uuid
                  constraints:
                    nullable: false

              - column:
                  name: destination_connection_id
                  type: uuid
                  constraints:
                    nullable: false


  - addForeignKeyConstraint:
      baseColumnNames: source_agent_id
      baseTableName: connection_link
      constraintName: fk_connection_link_source_agent_id
      referencedColumnNames: id
      referencedTableName: agent

  - addForeignKeyConstraint:
      baseColumnNames: destination_agent_id
      baseTableName: connection_link
      constraintName: fk_connection_link_destination_agent_id
      referencedColumnNames: id
      referencedTableName: agent

  - addForeignKeyConstraint:
      baseColumnNames: source_connection
      baseTableName: connection_link
      constraintName: fk_connection_link_source_connection_id
      referencedColumnNames: id
      referencedTableName: connection

  - addForeignKeyConstraint:
      baseColumnNames: destination_connection
      baseTableName: connection_link
      constraintName: fk_connection_link_destination_connection_id
      referencedColumnNames: id
      referencedTableName: connection

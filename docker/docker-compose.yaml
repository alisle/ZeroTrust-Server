version: '3.2'
services:
  truststore-postgresql:
    image: postgres:9.6.5
    environment:
      - POSTGRES_DB=notrust
      - POSTGRES_PASSWORD=notrust_password
    restart: always
  truststore-app:
      image: truststore:latest
      ports:
          - 8080:8080
      environment:
        - SPRING_PROFILES_ACTIVE=prod
      depends_on:
        - truststore-postgresql
  truststore-frontend:
      image: frontend:latest
      ports:
        - 4300:80
      depends_on:
        - truststore-app